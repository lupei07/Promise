<!--
 * @Author: lu
 * @Date: 2020-09-08 14:23:19
 * @LastEditTime: 2020-09-08 16:16:20
 * @FilePath: \Promise\03_JS中error.html
 * @Description: 
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>03_JS中error处理</title>
</head>

<body>

    <script>
        /*
        目标：进一步理解JS中的错误（Error）和错误处理
        mdn文档：
        */
        // 1. 错误的类型
        // 1) Error：所有错误的父类型

        // 2) ReferenceError：引用的变量不存在
        // console.log(a); // Uncaught ReferenceError:a is not defined
        // console.log('-----'); // 没有捕获error，下面的代码不会执行

        // 3) TypeError：数据类型不正确的错误
        let b = null
        const c
        console.log(b); // 没问题  输出  undefined
        // c = {}; // TypeError: Assignment to constant variable 赋值给常量
        // console.log(b.xxx);    // TypeError: Cannot read property 'xxx' of undefined
        b = {}
        b.xxx() // TypeError: b.xxx is not a function

        // 4) RangeError：数据值不在其所允许的范围内
        // 递归调用：函数内部调用自己
        // function fn() {
        //     fn()
        // }
        // fn()  // RangeError:Maximum call stack size exceeded
        // 5) SyntaxError：语法错误
        // const d = """" // SyntaxError：Unexpected string


        // 2. 错误处理
        // 1) 捕获错误：try ...  catch
        // massage 属性：错误相关信息
        // stack 属性：函数调用栈记录信息
        try {
            let e
            console.log(e.xxx)
        } catch (error) {
            console.log(error.message)
            console.log(error.stack);
        }
        // 2) 抛出错误：throw error
        function something() {
            if (Date.now() % 2 === 1) {
                console.log('当前时间为奇数，可以执行任务');
            } else {  // 抛出异常，由调用来处理
                throw new Error('当前时间为偶数无法执行任务')
            }
        }
        try {
            something()
        } catch (error) {
            console.log(error.message);
        }

        // 3. 错误对象
        // 1) message属性：错误相关信息
        // 2) stack属性：函数调用栈记录信息
    </script>

</body>

</html>